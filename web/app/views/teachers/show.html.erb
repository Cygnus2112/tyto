<div class="row">
  <div class="small-12 large-9 columns" id="tabs">
    <dl class="tabs" data-tab>
      <% if @classrooms != nil %>
        <%@classrooms.each do |classroom| %>
          <dd><a href="#panel<%=classroom.id%>"><%=classroom.name%></a></dd>
        <%end%>
      <%end%>
      <dd class="active"><a href="#panelcreate">Add Class</a></dd>
    </dl>

    <div class="tabs-content table">
      <% if @classrooms != nil %>
      <%@classrooms.each do |classroom| %>
        <div class="content" id="panel<%=classroom.id%>">
          <table class="classroomTable">
            <thead>
              <tr>
                <th width="150">Student</th>
                <th width="50">Text?</th>
                <%if @assignments[classroom.id] != nil %>
                  <%@assignments[classroom.id].each do |assignment| %>
                    <th><%=assignment.name%></th>
                  <%end%>
                <%end%>
              </tr>
            </thead>
            <tbody>
              <% if @students[classroom.id] != nil %>
              <%@students[classroom.id].each do |student| %>
              <tr>
                <td><%=student.username%></td>
                <td class="textCheckbox"><input id="checkbox1" type="checkbox"></td>
                <% if @studenthomework[classroom.id][student.id] != nil %>
                <%@studenthomework[classroom.id][student.id].each do |assignment| %>
                  <%if Time.now < assignment.deadline  %>
                    <td class="notLateAssignment"><%=assignment.proficiency.round(3)*100%>%</td>
                  <%elsif Time.now > assignment.deadline && assignment.complete == false  %>
                    <td class="lateAssignment"><%=assignment.proficiency.round(3)*100%>%</td>
                  <%elsif assignment.complete == true && assignment.question_level <= 2 %>
                   <td class="poorPerformance"><%=assignment.proficiency.round(3)*100%>%</td>
                  <%elsif assignment.complete == true && assignment.question_level > 2 %>
                   <td class="goodPerformance"><%=assignment.proficiency.round(3)*100%>%</td>
                  <% else %>
                   <td><%=q.proficiency.round(3)*100%>%</td>
                  <% end %>
                <%end%>
                <%end%>
              </tr>
              <%end%>
              <%end%>
            </tbody>
          </table>
        </div>
      <%end%>
      <%end%>
        <div class="content active" id="panelcreate">
          <form class="createClassroom">
          <div class="row">
            <div class="large-4 columns">
              <input type="text" placeholder="Class Name" id="classroomName">
              <input type="text" id="teacherId" value="<%=@teacher.id%>">
            </div>
            <div class="large-2 columns">
                <select id="courseName">
                  <%@courses.each do |course| %>
                    <option value="<%=course.name%>"><%=course.name.capitalize%></option>
                  <%end%>
                </select>
            </div>
            <div class="large-2 columns">
              <input type="submit" class="button postfix" value="Create" >
            </div>
            <div class="large-4 columns"></div>
          </div>
          </form>
          <form id="createClassroom">
        </div>
    </div>
  </div>

  <div class="small-12 large-3 columns sidebar">
    <div class="row" id="assign">
      <% if @classrooms != nil %>
        <h3> Assign Homework </h3>
        <form id="AssignHomework">
              <div class="row">
                <div class="large-12 columns">

                    <select>
                      <%if @classrooms != nil %>
                        <%@classrooms.each do |classroom| %>
                          <option value="<%=classroom.name%>"><%=classroom.name.capitalize%></option>
                        <%end%>
                      <% end %>
                    </select>

                </div>
              </div>
              <div class="row">
                <div class="large-12 columns">

                      <select>
                        <option value="chapter11">Chapter 1.1 filler</option>
                        <option value="chapter12">Chapter 1.2 filler</option>
                        <option value="chapter13">Chapter 1.3 filler</option>
                      </select>

                </div>
              </div>
              <div class="row">
                  <div class="large-8 columns">
                    <label>Deadline
                      <input type="date" name="date">
                    </label>
                  </div>
              </div>
              <div class="row">
                <div class="large-6 columns">
                    <label>Time
                      <input type="time" name="time">
                    </label>
                  </div>
                  <div class="large-6 columns">
                    <label>Questions
                        <select>
                          <% counter = 5 %>
                          <% while counter < 31 %>
                            <option value="<%=counter%>"><%=counter%></option>
                            <% counter += 1 %>
                          <% end %>
                        </select>
                    </label>
                  </div>
              </div>
              <div class="row">
                <div class="large-12 columns">
                  <button class="button small full">Assign </button>
                </div>
              </div>
        </form>
      <%end%>
    </div>
    <div class="row" id="search">

    </div>
  </div>
</div>

<script>
window.studentsAll = [];
<% counter = 0 %>
<% if @classrooms != nil %>
<% @classrooms.each do |classroom| %>
  <% if @students[classroom.id] != nil %>
  <% @students[classroom.id].each do |student| %>
    window.studentsAll.push({classroom: "<%=classroom.name%>", email: "<%=student.email%>", struggling: false, name: "<%=student.username%>", id: <%=counter%>, late: true  })
    <% counter += 1 %>
  <% end %>
  <% end %>
  <% end %>
<% end%>
</script>

